
### 公式
$$(−1)^{sign}×1.fraction×2^{exponent−bias}$$

$$bias = 2^{n−1} −1$$

- `sign` 位决定数的正负。
- `fraction`（也称作 `mantissa` 或 `significand`）是小数部分。
- `exponent` 是指数部分，用来表示数值的范围。
- `bias` 是一个固定值，用于调整指数的范围。

float16  1位符号，5位指数，10位尾数, bias 15 = 2^(5-1) -1
bf16     1位符号, 8位指数, 7位尾数,  bias 127 2^(8-1) -1

### float16 表示过程

1. 原始数值：0.1234
2. 二进制表示：0.00011111101110...
   - 0.1234 * 2 = 0.2468 → 整数部分是 0，小数部分是 0.2468
   - 0.2468 * 2 = 0.4936 → 整数部分是 0，小数部分是 0.4936
   - 0.4936 * 2 = 0.9872 → 整数部分是 0，小数部分是 0.9872
   - 以此类推
3. 规范化：1.1111101110... × 2^(-4)
4. float16 存储（1位符号，5位指数，10位尾数）：
    - 符号位：0（正数）
    - 指数：-4 + 15（偏置） = 11（二进制：01011）
    - 尾数：1111101110（保留10位）

得出：
- 符号位 (sign)：0（正数）。
- 指数位 (exponent)：01011
- 尾数位 (fraction)：1111101110...（前 10 位）。


### 从 float16 转回十进制

1. 指数部分：
    - 存储值：01011（二进制）= 11（十进制）
    - 实际指数：11 - 15（去偏置） = -4
2. 尾数部分：
1111101110（二进制）
3. 重构浮点数：
(1 + 0.1111101110₂) × 2^(-4)
4. 计算：
    - 1 + 0.1111101110₂
    = 1 + (1/2 + 1/4 + 1/8 + 1/16 + 1/32 + 1/64 + 1/128 + 1/256 + 1/512 + 1/1024)
    = 1 + 0.9990234375
    = 1.9990234375
5. 最终结果：
1.9990234375 × 2^(-4) = 0.12494396484375

### 结论

float16 表示的 0.1234 在转回十进制后的值为 0.12494396484375。

这个结果与原始值 0.1234 相比有一些误差，这是由于 float16 的精度限制造成的。float16 只能保留大约 3 到 4 位有效数字，因此在表示和计算中会产生一定的舍入误差。
